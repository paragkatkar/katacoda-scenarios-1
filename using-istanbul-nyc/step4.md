# Running the Pinger Tests and Analyzing Results

In this step well execute the unit tests and also run code coverage. The project, `pinger` ships with a
second HTTP server that publishes the test report generated by `Instanbul/Nyc`.

**Task 1:** Navigate back to the application source code directory so that we can run the tests.

`cd /root/pinger/app/`{{execute  T1}}

Take a look at `package.json`.

`cat package.json`{{execute  T1}}

Notice in the `scripts` section there is a `test` command as
well as an entry for a `coverage` command.

```json

 "scripts": {
    "test": "nyc mocha",
    "start": "node server.js",
    "coverage": "nyc --reporter=lcov --reporter=text-lcov npm test && node testdocserver.js"
  }
```

The `test` command will execute the unit test and out put a coverage report summary.

The `coverage` command runs code coverage and generates the coverage report. Also, the command stars the test documentation
server that ships with `pinger`. (**NOTE**: The test documentation server is custom programmed for `pinger`.)

**Task 2:** Execute the following command to run the`pinger` unit tests.

`npm test`{{execute  T1}}

The unit tests will report pass and fail. Also generate a code coverage summary.

```text
6 passing (113ms)

-----------|----------|----------|----------|----------|-------------------|
File       |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
-----------|----------|----------|----------|----------|-------------------|
All files  |    90.91 |    81.25 |      100 |    92.86 |                   |
 server.js |    90.91 |    81.25 |      100 |    92.86 |          15,16,29 |
-----------|----------|----------|----------|----------|-------------------|
```

**Task 3:** Execute the following command to generate a coverage report in HTML.

`npm run coverage`{{execute  T1}}

**Task 4:** To view the HTML files in a browser go here:

https://[[HOST_SUBDOMAIN]]-3001-[[KATACODA_HOST]].environments.katacoda.com/

The home page for the coverage report should look something like the following
that looks like the following.

![Coverage](https://raw.githubusercontent.com/reselbob/katacoda-scenarios/master/using-istanbul-nyc/images/coverage.png)


**Task 5:** Open a second terminal window

`Click to open a second window`{{execute T2}}

**Task 6:** To shut down the Test Documentation Server, [curl](https://www.lifewire.com/curl-definition-2184508)
the following URL in the second terminal window:

`curl https://[[HOST_SUBDOMAIN]]-3001-[[KATACODA_HOST]].environments.katacoda.com/stop`{{execute  T2}}

Let's start up the `pinger` API so see the information it provides.

**Task 7:** Execute the following command to start the `pinger` API server in the second terminal window.

`cd pinger/app/ && node server.js`{{execute T2}}

To see `pinger` information in a web browser, go here:

https://[[HOST_SUBDOMAIN]]-3000-[[KATACODA_HOST]].environments.katacoda.com/

**Congratulations! You're done!**


